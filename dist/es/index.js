const e="EasiCustomer/",i="EasiMalaysia/",s=(e,i,s)=>{switch(i.complete&&i.complete({errMsg:`${s}:complete`}),e.code){case 0:i.success&&i.success({errMsg:`${s}:ok`,result:e?.data});break;case 1:i.cancel&&i.cancel({errMsg:`${s}:cancel`});break;default:i.fail&&i.fail({errMsg:`${s}:fail`})}},a=(e,i,s,a)=>{(e=>{if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",(function(){e(window.WebViewJavascriptBridge)}),!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];const i=document.createElement("iframe");i.style.display="none",i.src="https://__bridge_loaded__",document.documentElement.appendChild(i),setTimeout((function(){document.documentElement.removeChild(i)}),0)})((t=>{t.callHandler(`easi.${e}`,i,(i=>{"string"==typeof i&&(i=JSON.parse(i)),s(i,a,e)}))}))},t={state:0,data:{},completes:[]},n={config:e=>{e.debug&&console.log("config",e),a("login",{},(e=>{-1===e.code&&t.fail&&t.fail(),t.state=1;for(const e of t.completes)e();t.completes=[]}),e)},checkJsApi:()=>{},ready:e=>{0!==t.state?e&&e():t.completes.push(e)},error:e=>{-1===t.state?e&&e(t.data):t.fail=e},test:e=>{a("login",{},s,e)},getEnv:()=>{const s=navigator.userAgent,a=s.includes(e),t=s.includes(i),n=s.includes("Android")||s.includes("android")||s.includes("Linux"),c=s.includes("iPhone")||s.includes("iOS");return{ua:s,isEasi:a,isMalaysia:t,isAndroid:n,isIos:c,version:(s=>{const a=s.ua.split(" ");if(a.length>0){const t=s.isMalaysia?i:e;if(a[0].includes(t))return a[0].replace(t,"")}return null})({ua:s,isMalaysia:t})}}};export default n;
