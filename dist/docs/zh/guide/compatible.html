<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>兼容 | easi-jssdk</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/easi-jssdk/2.0.0/docs/assets/style.fc2f3b64.css">
    <link rel="modulepreload" href="/easi-jssdk/2.0.0/docs/assets/Home.88ce139b.js">
    <link rel="modulepreload" href="/easi-jssdk/2.0.0/docs/assets/app.039d7064.js">
    <link rel="modulepreload" href="/easi-jssdk/2.0.0/docs/assets/zh_guide_compatible.md.ff79a210.lean.js">
    <link rel="modulepreload" href="/easi-jssdk/2.0.0/docs/assets/app.039d7064.js">
    <link rel="icon" href="/easi-jssdk/2.0.0/docs/images/favicon.ico">
    <meta name="twitter:title" content="兼容 | easi-jssdk">
    <meta property="og:title" content="兼容 | easi-jssdk">
  </head>
  <body>
    <div id="app"><div class="h-screen flex flex-col"><header class="header border-b border-gray-100 px-30 fixed top-0 w-full bg-white z-10"><section class="h-70 max-w-1376 w-full items-center flex flex-row justify-between mx-auto"><a href="/easi-jssdk/2.0.0/docs/index.html" class="flex items-center h-30"><img class="mr-10 h-full max-w-full" src="/easi-jssdk/2.0.0/docs/images/logo.svg" alt="" srcset=""></a><div class="flex flex-row items-center"><!----><div class="mr-20"><nav class="flex-row hidden md:flex"><!--[--><a class="text-gray-900 px-10 cursor-pointer text-14 text-gray-500 hover:text-gray-900" href="/easi-jssdk/2.0.0/docs/zh/guide/base">指南</a><a class="px-10 cursor-pointer text-14 text-gray-500 hover:text-gray-900" href="/easi-jssdk/2.0.0/docs/zh/api/config">API</a><!--]--></nav><!--[--><div class="menu-handle transform flex" ariadescribedby="el-popper-2404"><i class="menu-handle-icon"></i></div><!--teleport start--><!--teleport end--><!--]--></div><a href="https://github.com/infinitasx/easi-customer-jssdk"><img class="w-20 cursor-pointer" src="/easi-jssdk/2.0.0/docs/images/github.svg" alt="" srcset=""></a></div></section></header><div class="px-30 flex-auto h-1/2 pt-70"><section class="flex flex-row max-w-1376 mx-auto flex-1 w-full h-full"><div><aside class="fixed w-240 border-r pr-10 border-gray-100 box-content pt-20 overflow-y-scroll top-70 bottom-0 hidden md:flex"><div class="w-full"><!--[--><div><h3 class="text-16 text-black py-10 font-bold">基础</h3><!--[--><a title="安装" class="h-40 leading-40 block px-20 rounded-sm text-14 text-gray-500 hover:text-gray-900 text-ellipsis cursor-pointer" href="/easi-jssdk/2.0.0/docs/zh/guide/base">安装</a><a title="快速开始" class="h-40 leading-40 block px-20 rounded-sm text-14 text-gray-500 hover:text-gray-900 text-ellipsis cursor-pointer" href="/easi-jssdk/2.0.0/docs/zh/guide/begin">快速开始</a><a title="兼容" class="side-active h-40 leading-40 block px-20 rounded-sm text-14 text-gray-500 hover:text-gray-900 text-ellipsis cursor-pointer" href="/easi-jssdk/2.0.0/docs/zh/guide/compatible">兼容</a><a title="变更日志" class="h-40 leading-40 block px-20 rounded-sm text-14 text-gray-500 hover:text-gray-900 text-ellipsis cursor-pointer" href="/easi-jssdk/2.0.0/docs/zh/guide/changelog">变更日志</a><!--]--></div><!--]--></div></aside><!--[--><div class="drawer-container-close drawer-wraper fixed h-full left-0 top-0 z-20 transform flex" data-v-64b6aeee><div class="drawer-container h-full bg-white overflow-y-scroll" data-v-64b6aeee><!--[--><div class="w-full"><!--[--><div><h3 class="text-16 text-black py-10 font-bold">基础</h3><!--[--><a title="安装" class="h-40 leading-40 block px-20 rounded-sm text-14 text-gray-500 hover:text-gray-900 text-ellipsis cursor-pointer" href="/easi-jssdk/2.0.0/docs/zh/guide/base">安装</a><a title="快速开始" class="h-40 leading-40 block px-20 rounded-sm text-14 text-gray-500 hover:text-gray-900 text-ellipsis cursor-pointer" href="/easi-jssdk/2.0.0/docs/zh/guide/begin">快速开始</a><a title="兼容" class="side-active h-40 leading-40 block px-20 rounded-sm text-14 text-gray-500 hover:text-gray-900 text-ellipsis cursor-pointer" href="/easi-jssdk/2.0.0/docs/zh/guide/compatible">兼容</a><a title="变更日志" class="h-40 leading-40 block px-20 rounded-sm text-14 text-gray-500 hover:text-gray-900 text-ellipsis cursor-pointer" href="/easi-jssdk/2.0.0/docs/zh/guide/changelog">变更日志</a><!--]--></div><!--]--></div><!--]--></div><div class="drawer-close drawer-handle flex" data-v-64b6aeee><i class="drawer-handle-icon" data-v-64b6aeee></i></div></div><!----><!--]--></div><section class="md:pl-280 flex-1 w-full pt-30 pb-50 flex flex-row pl-0"><div class="flex-1 w-full flex flex-col"><div style="position:relative;" class="flex-1"><div><h1 id="兼容" tabindex="-1">兼容 <a class="header-anchor" href="#兼容" aria-hidden="true">#</a></h1><p>为了处理新老客户端混用 jssdk 的问题，目前在 jssdk 内部已做了兼容,在使用新老 api 之前需要先判断是否存在</p><h2 id="es-modules" tabindex="-1">ES modules <a class="header-anchor" href="#es-modules" aria-hidden="true">#</a></h2><p>老写法</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Easi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;easi-jssdk&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// 老api</span>
<span class="token keyword">const</span> easi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Easi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
easi<span class="token punctuation">.</span><span class="token function">addCart</span><span class="token punctuation">(</span>
  <span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 调用成功</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    itemId<span class="token operator">:</span> <span class="token number">1234</span><span class="token punctuation">,</span>
    openDetails<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>新写法</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> easi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;easi-jssdk&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// 老api</span>
easi<span class="token punctuation">.</span>addCart <span class="token operator">&amp;&amp;</span>
  easi<span class="token punctuation">.</span><span class="token function">addCart</span><span class="token punctuation">(</span>
    <span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 调用成功</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      itemId<span class="token operator">:</span> <span class="token number">1234</span><span class="token punctuation">,</span>
      openDetails<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 新api</span>
easi<span class="token punctuation">.</span>getXXX <span class="token operator">&amp;&amp;</span> easi<span class="token punctuation">.</span><span class="token function">getXXX</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  param1<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  param2<span class="token operator">:</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">,</span>
  param3<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  param4<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  param5<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// 通用参数，回调函数</span>
  <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理成功情况</span>
    <span class="token keyword">const</span> value1 <span class="token operator">=</span> res<span class="token punctuation">.</span>value1
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value1<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> errMsg <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理失败情况</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理所有情况</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理用户取消情况</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="浏览器" tabindex="-1">浏览器 <a class="header-anchor" href="#浏览器" aria-hidden="true">#</a></h2><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://static.easiglobal.com/easi-jssdk/2.0.0/easi/index.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token comment">// easi</span>
      easi<span class="token punctuation">.</span>config <span class="token operator">&amp;&amp;</span> easi<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      easi<span class="token punctuation">.</span>addCart <span class="token operator">&amp;&amp;</span>
        easi<span class="token punctuation">.</span><span class="token function">addCart</span><span class="token punctuation">(</span>
          <span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// 调用成功</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            itemId<span class="token operator">:</span> <span class="token number">1234</span><span class="token punctuation">,</span>
            openDetails<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>老版本 api<a href="https://github.com/infinitasx/easi-customer-jssdk/edit/master/README.md" target="_blank" rel="noopener noreferrer">链接</a></p></div></div><div class="py-20 border-t border-gray-100 mt-20"><a class="text-gray-500 hover:text-gray-900 page-arrow-left flex items-center float-left text-14" href="/easi-jssdk/2.0.0/docs/zh/guide/begin">快速开始</a><a class="text-gray-500 hover:text-gray-900 page-arrow-right flex items-center float-right text-14" href="/easi-jssdk/2.0.0/docs/zh/guide/changelog">变更日志</a></div></div><!----></section></section></div><!----></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"3e378649\",\"zh_api_addtocart.md\":\"2db2cbc0\",\"zh_api_addtofavourites.md\":\"a66901f3\",\"zh_api_checkjsapi.md\":\"4b8b57ed\",\"zh_api_chooseimage copy.md\":\"cc1cd9e8\",\"zh_api_chooseimage.md\":\"701c10ee\",\"zh_api_closewindow.md\":\"a6f640ca\",\"zh_api_config.md\":\"d60a2ef7\",\"zh_api_copy.md\":\"129a9003\",\"zh_api_devicelocation.md\":\"a2e69cf7\",\"zh_api_error.md\":\"e37ba2cb\",\"zh_api_facebooktimeline.md\":\"a4b47aac\",\"zh_api_geteasilocation.md\":\"24388391\",\"zh_api_getnetworktype.md\":\"7adf261f\",\"zh_api_hideglobalcart.md\":\"2982a845\",\"zh_api_hidemenubar.md\":\"ab704deb\",\"zh_api_hidemenuitems.md\":\"06a2d427\",\"zh_api_hidenavbar.md\":\"a8407a57\",\"zh_api_localimagedata.md\":\"ca3861cd\",\"zh_api_openappaddress.md\":\"bbd7e1ba\",\"zh_api_openappcoupons.md\":\"a0ec7d93\",\"zh_api_openappcustomerservice.md\":\"a6392784\",\"zh_api_openappfavourites.md\":\"e78978b9\",\"zh_api_openapplanguages.md\":\"e3f35046\",\"zh_api_openappshop.md\":\"e5ad45dd\",\"zh_api_openapptabbar.md\":\"a69efcf7\",\"zh_api_openapppage.md\":\"ff0ee0f9\",\"zh_api_openlocation.md\":\"1d6b3fd7\",\"zh_api_openwebpage.md\":\"0f90f170\",\"zh_api_previewimage.md\":\"1ec66751\",\"zh_api_ready.md\":\"f6653466\",\"zh_api_removefromcart.md\":\"ba64c3da\",\"zh_api_removefromfavourites.md\":\"3b27018a\",\"zh_api_scanbarcode.md\":\"09a8dfa3\",\"zh_api_scanqrcode.md\":\"63c71781\",\"zh_api_selectappaddress.md\":\"e90aa4d3\",\"zh_api_showglobalcart.md\":\"3d3bca30\",\"zh_api_showmenubar.md\":\"0e886b00\",\"zh_api_showmenuitems.md\":\"e0e0fddd\",\"zh_api_shownavbar.md\":\"f1f4ddea\",\"zh_api_userinfo.md\":\"f5de481b\",\"zh_api_wechatmessage.md\":\"4216f0e1\",\"zh_api_wechattimeline.md\":\"d5f90194\",\"zh_guide_base.md\":\"fd54bef0\",\"zh_guide_begin.md\":\"d8cf5acd\",\"zh_guide_changelog.md\":\"6159a809\",\"zh_guide_compatible.md\":\"ff79a210\",\"zh_index.md\":\"3c646b5b\"}")</script>
    <script type="module" async src="/easi-jssdk/2.0.0/docs/assets/app.039d7064.js"></script>
    
  </body>
</html>