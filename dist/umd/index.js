!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(e="undefined"!=typeof globalThis?globalThis:e||self).easi=i()}(this,(function(){"use strict";const e="EasiCustomer/",i="EasiMalaysia/",s=(e,i,s)=>{switch(i.complete&&i.complete({errMsg:`${s}:complete`}),e.code){case 0:i.success&&i.success({errMsg:`${s}:ok`,result:e?.data});break;case 1:i.cancel&&i.cancel({errMsg:`${s}:cancel`});break;default:i.fail&&i.fail({errMsg:`${s}:fail`})}},t=(e,i,s,t)=>{(e=>{if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",(function(){e(window.WebViewJavascriptBridge)}),!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];const i=document.createElement("iframe");i.style.display="none",i.src="https://__bridge_loaded__",document.documentElement.appendChild(i),setTimeout((function(){document.documentElement.removeChild(i)}),0)})((n=>{n.callHandler(`easi.${e}`,i,(i=>{"string"==typeof i&&(i=JSON.parse(i)),s(i,t,e)}))}))},n={state:0,data:{},completes:[]};return{config:e=>{e.debug&&console.log("config",e),t("login",{},(e=>{-1===e.code&&n.fail&&n.fail(),n.state=1;for(const e of n.completes)e();n.completes=[]}),e)},checkJsApi:()=>{},ready:e=>{0!==n.state?e&&e():n.completes.push(e)},error:e=>{-1===n.state?e&&e(n.data):n.fail=e},test:e=>{t("login",{},s,e)},getEnv:()=>{const s=navigator.userAgent,t=s.includes(e),n=s.includes(i),a=s.includes("Android")||s.includes("android")||s.includes("Linux"),o=s.includes("iPhone")||s.includes("iOS");return{ua:s,isEasi:t,isMalaysia:n,isAndroid:a,isIos:o,version:(s=>{const t=s.ua.split(" ");if(t.length>0){const n=s.isMalaysia?i:e;if(t[0].includes(n))return t[0].replace(n,"")}return null})({ua:s,isMalaysia:n})}}}}));
