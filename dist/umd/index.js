!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).easiCustomerJssdk={})}(this,(function(e){"use strict";function i(e,i){for(var s=0;s<i.length;s++){var a=i[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}var a=function(){function e(){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"SYS_ERROR",{code:100,data:""}),s(this,"SYS_CONFIG",{easiAgent:"EasiCustomer/",easiVersion:"1.8.10",easiUserVersion:"1.9.59",easiMalaysiaAgent:"EasiMalaysia/",easiMalaysiaVersion:"4.9.39",easiMalaysiaUserVersion:"4.9.39"}),s(this,"getVersion",(function(e){var i=this.version();e(i?{code:0,data:i}:this.SYS_ERROR)})),s(this,"getLocation",(function(e){var i=this.version();if(i){if(this.isEasi()){if(this.compareVersionEle(i,this.SYS_CONFIG.easiVersion))return void easi.call("easi.location",e)}else if(this.isMalaysia()&&this.compareVersionEle(i,this.SYS_CONFIG.easiMalaysiaVersion))return void easi.call("easi.location",e);e(this.SYS_ERROR)}else e(this.SYS_ERROR)}))}var a,n,t;return a=e,(n=[{key:"setupWebViewJavascriptBridge",value:function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",(function(){e(WebViewJavascriptBridge)}),!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var i=document.createElement("iframe");i.style.display="none",i.src="https://__bridge_loaded__",document.documentElement.appendChild(i),setTimeout((function(){document.documentElement.removeChild(i)}),0)}},{key:"call",value:function(e,i,s){this.setupWebViewJavascriptBridge((function(a){i&&"function"==typeof i&&(s=i,i=""),a.callHandler(e,i,(function(e){"string"==typeof e&&(e=JSON.parse(e)),s&&s(e)}))}))}},{key:"version",value:function(){var e="",i=navigator.userAgent.split(" ");if(i.length>0){var s=this.isMalaysia()?this.SYS_CONFIG.easiMalaysiaAgent:this.SYS_CONFIG.easiAgent,a=i[0].indexOf(s);-1!=a&&(e=i[0].substring(a+s.length))}return e}},{key:"isEasi",value:function(){var e=!1,i=navigator.userAgent.split(" ");return i.length>0&&-1!=i[0].indexOf(this.SYS_CONFIG.easiAgent)&&(e=!0),e}},{key:"isMalaysia",value:function(){var e=!1,i=navigator.userAgent.split(" ");return i.length>0&&-1!=i[0].indexOf(this.SYS_CONFIG.easiMalaysiaAgent)&&(e=!0),e}},{key:"compareVersionEle",value:function(e,i){if(!e||!i)return!1;for(var s=e.split("."),a=i.split("."),n=0;n<s.length;n++){if(parseInt(s[n])>parseInt(a[n]))return!0;if(parseInt(s[n])<parseInt(a[n]))return!1}return!1}},{key:"isAndroid",value:function(){var e=navigator.userAgent;return e.indexOf("Android")>-1||e.indexOf("android")>-1||e.indexOf("Linux")>-1}},{key:"isIos",value:function(){var e=navigator.userAgent;return e.indexOf("iPhone")>-1||e.indexOf("iOS")>-1}},{key:"scan",value:function(e){var i=this.version();if(i){if(this.isEasi()){if(this.compareVersionEle(i,this.SYS_CONFIG.easiVersion))return void easi.call("easi.scan",e)}else if(this.isMalaysia()&&this.compareVersionEle(i,this.SYS_CONFIG.easiMalaysiaVersion))return void easi.call("easi.scan",e);e(this.SYS_ERROR)}else e(this.SYS_ERROR)}},{key:"user",value:function(e){var i=this.version();if(i){if(this.isEasi()){if(this.compareVersionEle(i,this.SYS_CONFIG.easiUserVersion))return void easi.call("easi.user",e)}else if(this.isMalaysia()&&this.compareVersionEle(i,this.SYS_CONFIG.easiMalaysiaUserVersion))return void easi.call("easi.user",e);e(this.SYS_ERROR)}else e(this.SYS_ERROR)}},{key:"wx_share",value:function(e,i,s,a){return!!this.version()&&(window.location.href="au.com.easi.customer://share/text?url="+encodeURIComponent(e)+"&title="+i+"&text="+s+"&mode="+a+"&channel=1",!0)}}])&&i(a.prototype,n),t&&i(a,t),e}();e.Easi=a,Object.defineProperty(e,"__esModule",{value:!0})}));
