!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).easi=n()}(this,(function(){"use strict";var e="EasiCustomer/",n="EasiMalaysia/",i=function(e,n,i){switch(n.complete&&n.complete({errMsg:"".concat(i,":complete")}),e.code){case 0:n.success&&n.success({errMsg:"".concat(i,":ok"),result:null==e?void 0:e.data});break;case 1:n.cancel&&n.cancel({errMsg:"".concat(i,":cancel")});break;default:n.fail&&n.fail({errMsg:"".concat(i,":fail")})}},t=function(e,n,i,t){!function(e){if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",(function(){e(window.WebViewJavascriptBridge)}),!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var n=document.createElement("iframe");n.style.display="none",n.src="https://__bridge_loaded__",document.documentElement.appendChild(n),setTimeout((function(){document.documentElement.removeChild(n)}),0)}((function(a){a.callHandler("easi.".concat(e),n,(function(n){"string"==typeof n&&(n=JSON.parse(n)),i(n,t,e)}))}))},a={state:0,data:{}};return{config:function(e){e.debug&&console.log("debug:".concat(JSON.stringify(e))),t("login",{},(function(n){if(-1===n.code)return a.data=e,a.fail&&a.fail();a.state=1,a.completes&&a.completes()}),e)},checkJsApi:function(){},ready:function(e){0!==a.state?e&&e():a.completes=e},error:function(e){-1===a.state?e&&e(a.data):a.fail=e},test:function(e){t("login",{},i,e)},getEnv:function(){var i=navigator.userAgent,t=i.includes(e),a=i.includes(n),c=i.includes("Android")||i.includes("android")||i.includes("Linux"),o=i.includes("iPhone")||i.includes("iOS");return{ua:i,isEasi:t,isMalaysia:a,isAndroid:c,isIos:o,version:function(i){var t=i.ua.split(" ");if(t.length>0){var a=i.isMalaysia?n:e;if(t[0].includes(a))return t[0].replace(a,"")}return null}({ua:i,isMalaysia:a})}}}}));
