!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(e="undefined"!=typeof globalThis?globalThis:e||self).easi=s()}(this,(function(){"use strict";const e="EasiCustomer/",s="EasiMalaysia/";var i,a;(a=i||(i={}))[a.success=0]="success",a[a.fail=1]="fail",a[a.cancel=2]="cancel";const t=(e,s,i)=>{switch(s.complete&&s.complete({errMsg:`${i}:complete`}),e.status){case 0:s.success&&s.success({errMsg:`${i}:ok`,result:e?.data});break;case 2:s.cancel&&s.cancel({errMsg:`${i}:cancel`});break;case 1:s.fail&&s.fail({message:e?.message,errMsg:`${i}:fail`})}},n=(e,s,i,a)=>{(e=>{if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",(function(){e(window.WebViewJavascriptBridge)}),!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];const s=document.createElement("iframe");s.style.display="none",s.src="https://__bridge_loaded__",document.documentElement.appendChild(s),setTimeout((function(){document.documentElement.removeChild(s)}),0)})((t=>{t.callHandler(e,s,(s=>{"string"==typeof s&&(s=JSON.parse(s)),i(s,a,e)}))}))},c={status:null,data:{}};return{config:e=>{e.debug&&console.log(`debug:${JSON.stringify(e)}`),n("config",{jsApiList:e.jsApiList},(s=>{switch(s.status){case i.fail:c.data=s.data||e,c.fail&&c.fail(c.data);break;default:c.status="completes",c.completes&&c.completes()}}),e)},checkJsApi:e=>{n("checkJsApi",{jsApiList:e.jsApiList},t,e)},ready:e=>{c.completes=e},error:e=>{c.fail=e},getEnv:()=>{const i=navigator.userAgent,a=i.includes(e),t=i.includes(s),n=i.includes("Android")||i.includes("android")||i.includes("Linux"),c=i.includes("iPhone")||i.includes("iOS");return{ua:i,isEasi:a,isMalaysia:t,isAndroid:n,isIos:c,version:(i=>{const a=i.ua.split(" ");if(a.length>0){const t=i.isMalaysia?s:e;if(a[0].includes(t))return a[0].replace(t,"")}return null})({ua:i,isMalaysia:t})}},scanQRCode:e=>{n("easi.scan",{needContent:e.needContent},t,e)},getLocation:e=>{n("easi.location",{type:e.type||"wgs84"},t,e)}}}));
