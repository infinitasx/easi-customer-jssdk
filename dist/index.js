!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(e="undefined"!=typeof globalThis?globalThis:e||self).easi=i()}(this,(function(){"use strict";const e="EasiCustomer/",i="EasiMalaysia/",s=(e,i,s)=>{switch(i.complete&&i.complete({errMsg:`${s}:complete`}),e.code){case 0:i.success&&i.success({errMsg:`${s}:ok`,result:e?.data});break;case 1:i.cancel&&i.cancel({errMsg:`${s}:cancel`});break;default:i.fail&&i.fail({errMsg:`${s}:fail`})}},t=(e,i,s,t)=>{(e=>{if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",(function(){e(window.WebViewJavascriptBridge)}),!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];const i=document.createElement("iframe");i.style.display="none",i.src="https://__bridge_loaded__",document.documentElement.appendChild(i),setTimeout((function(){document.documentElement.removeChild(i)}),0)})((a=>{a.callHandler(`easi.${e}`,i,(i=>{"string"==typeof i&&(i=JSON.parse(i)),s(i,t,e)}))}))},a={state:0,data:{}};return{config:e=>{e.debug&&console.log(`debug:${JSON.stringify(e)}`),t("login",{},(i=>{if(-1===i.code)return a.data=e,a.fail&&a.fail();a.state=1,a.completes&&a.completes()}),e)},checkJsApi:()=>{},ready:e=>{0!==a.state?e&&e():a.completes=e},error:e=>{-1===a.state?e&&e(a.data):a.fail=e},test:e=>{t("login",{},s,e)},getEnv:()=>{const s=navigator.userAgent,t=s.includes(e),a=s.includes(i),n=s.includes("Android")||s.includes("android")||s.includes("Linux"),c=s.includes("iPhone")||s.includes("iOS");return{ua:s,isEasi:t,isMalaysia:a,isAndroid:n,isIos:c,version:(s=>{const t=s.ua.split(" ");if(t.length>0){const a=s.isMalaysia?i:e;if(t[0].includes(a))return t[0].replace(a,"")}return null})({ua:s,isMalaysia:a})}}}}));
