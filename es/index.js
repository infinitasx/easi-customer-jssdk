const e="EasiCustomer/",i="EasiMalaysia/",a=(e,i,a)=>{switch(i.complete&&i.complete({errMsg:`${a}:complete`}),e.code){case 0:i.success&&i.success({errMsg:`${a}:ok`,result:e?.data});break;case 1:i.cancel&&i.cancel({errMsg:`${a}:cancel`});break;default:i.fail&&i.fail({errMsg:`${a}:fail`})}},s=(e,i,a,s)=>{(e=>{if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",(function(){e(window.WebViewJavascriptBridge)}),!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];const i=document.createElement("iframe");i.style.display="none",i.src="https://__bridge_loaded__",document.documentElement.appendChild(i),setTimeout((function(){document.documentElement.removeChild(i)}),0)})((t=>{t.callHandler(`easi.${e}`,i,(i=>{"string"==typeof i&&(i=JSON.parse(i)),a(i,s,e)}))}))},t={state:0,data:{}},n={config:e=>{e.debug&&console.log(`debug:${JSON.stringify(e)}`),s("login",{},(i=>{if(-1===i.code)return t.data=e,t.fail&&t.fail();t.state=1,t.completes&&t.completes()}),e)},checkJsApi:()=>{},ready:e=>{0!==t.state?e&&e():t.completes=e},error:e=>{-1===t.state?e&&e(t.data):t.fail=e},test:e=>{s("login",{},a,e)},getEnv:()=>{const a=navigator.userAgent,s=a.includes(e),t=a.includes(i),n=a.includes("Android")||a.includes("android")||a.includes("Linux"),c=a.includes("iPhone")||a.includes("iOS");return{ua:a,isEasi:s,isMalaysia:t,isAndroid:n,isIos:c,version:(a=>{const s=a.ua.split(" ");if(s.length>0){const t=a.isMalaysia?i:e;if(s[0].includes(t))return s[0].replace(t,"")}return null})({ua:a,isMalaysia:t})}}};export default n;
